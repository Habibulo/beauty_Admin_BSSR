<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Convert | Export html Table to CSV & EXCEL File</title>
  <link rel="stylesheet" type="text/css" href="../public/css/products.css">
</head>

<body>
  <main class="table" id="customers_table">
      <div class="table_header">
        <div class="navigation-menu-header">
         <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" href="/admin">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="/admin/product/all">Products</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/user/all">Users</a>
          </li>
          <li class="nav-item" style="cursor: pointer" onclick="return confirm('Do you want to logout?')">
            <a class="nav-link" href="/admin/logout">Logout</a>
          </li>
        </ul>
      </div>
      <section class="table__header">
        <h1>Products List</h1>
        <div class="input-group">
          <input type="search" placeholder="Search Data...">
          <img src="../public/img/userImages/search.png" alt="">
        </div>
        <div class="export__file">
          <label for="export-file" class="export__file-btn" title="Export File">
            <img src="../public/img/button.png" alt="">
          </label>
          <input type="checkbox" id="export-file" hidden>
          <div class="export__file-options">
            <label>Export As &nbsp; &#10140;</label>
            <label for="export-file" id="toPDF">PDF <img src="../public/img/userImages/pdf.png" alt=""></label>
            <label for="export-file" id="toJSON">JSON <img src="../public/img/userImages/json.png" alt=""></label>
            <label for="export-file" id="toCSV">CSV <img src="../public/img/userImages/csv.png" alt=""></label>
            <label for="export-file" id="toEXCEL">EXCEL <img src="../public/img/userImages/excel.png" alt=""></label>
          </div>
        </div>
      </section>

      <!-- Toggle form visibility -->
      <section class="table__body">
        <div class="header">
          <h1>NEW PRODUCT DETAIL</h1>
          <button class="create-btn" id="toggleFormBtn">Create New Product</button>
        </div>

        <!-- Form initially hidden -->
        <form id="productForm" style="display: none;" onsubmit="return validateForm()" action="/admin/product/create"
          method="POST" class="custom-form" enctype="multipart/form-data">

          <!-- Form inputs (match table structure) -->
          <!-- PRODUCT NAME & STATUS -->
          <div class="custom-input">
            <label for="productName">Product</label>
            <input type="text" name="productName" placeholder="Name" id="productName" />
          </div>
            <input type="hidden" name="productStatus" value="ACTIVE" id="productStatus"/>
          <div class="custom-row">
            <div class="custom-input">
              <label for="productPrice">Product Price</label>
              <input type="number" name="productPrice" placeholder="Price" id="productPrice" />
            </div>
            <div class="custom-input">
              <label for="productLeftCount">Product Left Counts</label>
              <input type="number" name="productLeftCount" placeholder="Counts" id="productLeftCount" />
            </div>
          </div>
     <!-- PRODUCT CATEGORY & SIZE-->
          <div class="custom-row">
            <div class="custom-input">
              <label for="productCategory">Category</label>
              <select name="productCategory" id="productCategory">
                <option value="SKINCARE">Skincare Products</option>
                <option value="FRAGRANCE" selected>Fragrance</option>
                <option value="HAIRCARE">Hair Care Products</option>
                <option value="BODYCARE">Body Care Products</option>
                <option value="NAILCARE">Nail Care</option>
                <option value="GROOMING">Men's Grooming</option>
                <option value="OTHER">Other</option>
              </select>
            </div>
            <div class="custom-input">
              <label for="productSize">Types</label>
              <select name="productSize" id="productSize">
                <option value="SMALL">Small</option>
                <option value="NORMAL" selected>Normal</option>
                <option value="LARGE">Large</option>
                <option value="AQUA">Aqua-Based</option>
              </select>
            </div>
            <div class="custom-input" id="product-volume">
              <label for="productVolume"> Product Volume</label>
              <select class="product-volume" name="productVolume">
                <option value="0.5">0,5ml</option>
                <option value="1" selected>100ml</option>
                <option value="1.2">250ml</option>
                <option value="1.5">350ml</option>
                <option value="2">500ml</option>
              </select>
            </div>
          </div>

          <div class="custom-input">
            <label for="productDesc">Product Description</label>
            <textarea name="productDesc" id="productDesc" placeholder="Product Description"></textarea>
          </div>
        <!-- PRODUCT IMAGE UPLOAD SECTION -->
          <div class="custom-images">
            <label>Product Images</label>
            <div class="custom-media-frame">
              <div class="custom-upload-img-box">
                <img 
                  src="../public/img/image.svg" 
                  id="image-section-1" 
                />
                <input 
                  type="file" 
                  id="file" 
                  name="productImages" 
                  onchange="previewFileHendler(this, 1)" 
                />
              </div>
              <div class="custom-upload-img-box">
                <img 
                  src="../public/img/image.svg" 
                  id="image-section-2" 
                />
                <input 
                  type="file" 
                  id="file" 
                  name="productImages" 
                  onchange="previewFileHendler(this, 2)" 
                />
              </div>
              <div class="custom-upload-img-box">
                <img 
                  src="../public/img/image.svg" 
                  id="image-section-3" 
                />
                <input 
                  type="file" 
                  id="file" 
                  name="productImages" 
                  onchange="previewFileHendler(this, 3)" 
                />
              </div>
              <div class="custom-upload-img-box">
                <img 
                  src="../public/img/image.svg" 
                  id="image-section-4" 
                />
                <input 
                  type="file" 
                  id="file" 
                  name="productImages" 
                  onchange="previewFileHendler(this, 4)" 
                />
              </div>

              <!-- Add more image uploaders as needed -->
            </div>
          </div>

          <input type="hidden" name="restaurantId" value="123" />

          <div class="custom-operation-buttons">
            <button type="button" class="cancel-btn">Cancel</button>
            <button type="submit" class="create-btn">Create</button>
          </div>
        </form>
      </section>

      <!-- TABLE SECTION -->
      <section class="table__body">
        <table>
          <thead>
            <tr>
              <th> No <span class="icon-arrow">&UpArrow;</span></th>
              <th> Image <span class="icon-arrow">&UpArrow;</span></th>
              <th> Product <span class="icon-arrow">&UpArrow;</span></th>
              <th> Category <span class="icon-arrow">&UpArrow;</span></th>
              <th> Type <span class="icon-arrow">&UpArrow;</span></th>
              <th> Status <span class="icon-arrow">&UpArrow;</span></th>
              <th> Price <span class="icon-arrow">&UpArrow;</span></th>
            </tr>
          </thead>
          <% products.map((val, key)=> {%>
          <tbody class="productCategory" name="productCategory">
            <tr>
              <td><%= key +1 %></td>  <!-- Increment the number dynamically -->
              <td><img src="${imageUrl}" alt="Product Image" width="50" height="50"/></td>
              <td><%= val.productName %></td>
              <td>${productCategory}</td>
              <td>${productSize}</td>
              <td>
                <select
                style="
                cursor: pointer;"
                class="status ${productStatus}"
                id="<%= val._id%>";
              >
                <option value="ACITVE"<%= val.productStatus ==="ACITVE"?  'selected': '' %> >ACITVE</option>
                <option value="PENDING" <%= val.productStatus ==="PENDING"?  'selected': '' %> >PENDING</option>
                <option value="OUTOFSTOCK" <%= val.productStatus ==="OUTOFSTOCK"?  'selected': '' %>>OUTOFSTOCK</option>
              </select>
              </td>
              <td><strong>$${productPrice}</strong></td>
            </tr>
          </tbody>
        </table>
      </section>
  </main>
  <!-- JavaScript for toggling the form -->
  <script src="../public/js/products.js"></script>

</body>
</html>